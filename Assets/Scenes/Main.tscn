[gd_scene load_steps=20 format=2]

[ext_resource path="res://Resources/Sprites/card_back.jpg" type="Texture" id=1]
[ext_resource path="res://Assets/Scripts/Game.gd" type="Script" id=2]
[ext_resource path="res://Assets/Scripts/Phases.gd" type="Script" id=3]
[ext_resource path="res://Assets/Scripts/Deck_one.gd" type="Script" id=4]
[ext_resource path="res://Assets/Scripts/End Turn Button.gd" type="Script" id=5]
[ext_resource path="res://Resources/Sprites/s-l1600.jpg" type="Texture" id=6]
[ext_resource path="res://Assets/Scripts/CardFactory.gd" type="Script" id=7]
[ext_resource path="res://Assets/Scripts/Action Center.gd" type="Script" id=8]
[ext_resource path="res://Assets/Scripts/Card Viewer.gd" type="Script" id=9]
[ext_resource path="res://Assets/Scripts/Main.gd" type="Script" id=10]
[ext_resource path="res://Assets/Main/Screens/ReadyScreen.tscn" type="PackedScene" id=11]
[ext_resource path="res://Assets/Main/Screens/MainMenu.tscn" type="PackedScene" id=12]
[ext_resource path="res://Assets/Main/Screens/ConnectionScreen.tscn" type="PackedScene" id=13]
[ext_resource path="res://Assets/Main/Screens/MatchScreen.tscn" type="PackedScene" id=14]
[ext_resource path="res://assets/fonts/monogram.ttf" type="DynamicFontData" id=15]
[ext_resource path="res://Assets/Main/UILayer.gd" type="Script" id=16]
[ext_resource path="res://Assets/fonts/monogram.tres" type="DynamicFont" id=17]
[ext_resource path="res://Assets/Scripts/Player.gd" type="Script" id=18]

[sub_resource type="DynamicFont" id=1]
size = 80
font_data = ExtResource( 15 )

[node name="Main" type="Node2D"]
script = ExtResource( 10 )

[node name="Game" type="Node2D" parent="."]
script = ExtResource( 2 )

[node name="Players" type="Node" parent="Game"]
script = ExtResource( 18 )

[node name="Background" type="CanvasLayer" parent="Game"]

[node name="Board" type="TextureRect" parent="Game/Background"]
visible = false
margin_right = 1926.0
margin_bottom = 1086.0
rect_rotation = 0.0843596
rect_scale = Vector2( 0.9969, 0.994659 )
mouse_filter = 2
texture = ExtResource( 6 )
expand = true
stretch_mode = 1

[node name="Ui" type="CanvasLayer" parent="Game"]

[node name="End Turn Test" type="Button" parent="Game/Ui"]
visible = false
margin_left = 1473.0
margin_top = 580.0
margin_right = 1540.0
margin_bottom = 600.0
rect_scale = Vector2( 2.53929, 2.25831 )
text = "End Turn"
script = ExtResource( 5 )

[node name="Counter" type="Panel" parent="Game/Ui"]
visible = false
margin_left = 921.0
margin_top = 518.0
margin_right = 1000.0
margin_bottom = 585.0

[node name="Memory" type="RichTextLabel" parent="Game/Ui/Counter"]
margin_left = 19.0
margin_top = 22.0
margin_right = 62.0
margin_bottom = 47.0
tab_size = 1
text = "0"

[node name="Card Handler" type="Node" parent="Game"]
script = ExtResource( 8 )

[node name="Zones" type="CanvasLayer" parent="Game/Card Handler"]
layer = 3

[node name="Card View" type="Node2D" parent="Game/Card Handler/Zones"]
visible = false
position = Vector2( 70, 202 )
scale = Vector2( 0.4, 0.4 )
script = ExtResource( 9 )

[node name="Baby Deck" type="TextureRect" parent="Game/Card Handler/Zones/Card View"]
margin_left = 86.6667
margin_top = 1700.0
margin_right = 371.667
margin_bottom = 2098.0
texture = ExtResource( 1 )

[node name="Trash" type="TextureRect" parent="Game/Card Handler/Zones/Card View"]
margin_left = 4182.5
margin_top = 1710.0
margin_right = 4467.5
margin_bottom = 2108.0
texture = ExtResource( 1 )

[node name="Breeding Area" type="TextureRect" parent="Game/Card Handler/Zones/Card View"]
margin_left = 456.667
margin_top = 1703.33
margin_right = 741.667
margin_bottom = 2101.33
texture = ExtResource( 1 )

[node name="Security" type="TextureRect" parent="Game/Card Handler/Zones/Card View"]
margin_left = 22.5
margin_top = 907.5
margin_right = 307.5
margin_bottom = 1305.5
texture = ExtResource( 1 )

[node name="Deck" type="TextureRect" parent="Game/Card Handler/Zones/Card View"]
margin_left = 4182.5
margin_top = 1272.5
margin_right = 4467.5
margin_bottom = 1670.5
texture = ExtResource( 1 )

[node name="Hand" type="Control" parent="Game/Card Handler/Zones/Card View"]

[node name="Deck Loader" type="TextureRect" parent="Game/Card Handler/Zones"]
script = ExtResource( 4 )

[node name="CardReader" type="Node" parent="Game/Card Handler/Zones/Deck Loader"]
script = ExtResource( 7 )

[node name="Phase Manager" type="Node" parent="Game"]
script = ExtResource( 3 )

[node name="UILayer" type="CanvasLayer" parent="."]
script = ExtResource( 16 )

[node name="Screens" type="Control" parent="UILayer"]
margin_right = 1913.0
margin_bottom = 1080.0

[node name="Main Menu" parent="UILayer/Screens" instance=ExtResource( 12 )]

[node name="ConnectionScreen" parent="UILayer/Screens" instance=ExtResource( 13 )]
visible = false

[node name="MatchScreen" parent="UILayer/Screens" instance=ExtResource( 14 )]
visible = false

[node name="ReadyScreen" parent="UILayer/Screens" instance=ExtResource( 11 )]
visible = false

[node name="Overlay" type="Control" parent="UILayer"]
visible = false
margin_right = 1917.0
margin_bottom = 1079.0
mouse_filter = 2

[node name="Message" type="Label" parent="UILayer/Overlay"]
visible = false
margin_left = 510.0
margin_top = 108.0
margin_right = 1388.0
margin_bottom = 186.0
custom_fonts/font = ExtResource( 17 )
text = "Waiting for players..."
align = 1

[node name="BackButton" type="Button" parent="UILayer/Overlay"]
margin_left = 1846.0
margin_top = 11.0
margin_right = 1909.0
margin_bottom = 90.0
custom_fonts/font = SubResource( 1 )
text = "X"

[connection signal="new_match" from="Game" to="Game/Phase Manager" method="_on_Game_new_match"]
[connection signal="new_match" from="Game" to="UILayer" method="_on_Game_new_match"]
[connection signal="button_down" from="Game/Ui/End Turn Test" to="Game/Phase Manager" method="_on_End_Turn_Test_button_down"]
[connection signal="drawn_card" from="Game/Card Handler" to="Game/Card Handler/Zones/Card View" method="_on_Card_Handler_drawn_card"]
[connection signal="drawn_card" from="Game/Card Handler" to="Game/Phase Manager" method="_on_Card_Handler_drawn_card"]
[connection signal="unsuspended_cards" from="Game/Card Handler" to="Game/Phase Manager" method="_on_Card_Handler_unsuspended_cards"]
[connection signal="deck_one_loaded" from="Game/Card Handler/Zones/Deck Loader" to="Game/Card Handler/Zones/Card View" method="_on_Deck_Loader_deck_one_loaded"]
[connection signal="phase_change" from="Game/Phase Manager" to="Game/Card Handler" method="_on_Phase_Manager_phase_change"]
[connection signal="back_button" from="UILayer" to="." method="_on_UILayer_back_button"]
[connection signal="change_screen" from="UILayer" to="." method="_on_UILayer_change_screen"]
[connection signal="play_online" from="UILayer/Screens/Main Menu" to="." method="_on_Main_Menu_play_online"]
[connection signal="ready_pressed" from="UILayer/Screens/ReadyScreen" to="." method="_on_ReadyScreen_ready_pressed"]
[connection signal="pressed" from="UILayer/Overlay/BackButton" to="UILayer" method="_on_BackButton_pressed"]
